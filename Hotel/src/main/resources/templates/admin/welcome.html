<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>主页一</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="../lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/js/xadmin.js"></script>
</head>
<style>
    .layui-top-box {padding:40px 20px 20px 20px;color:#fff}
    .panel {margin-bottom:17px;background-color:#fff;border:1px solid transparent;border-radius:3px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}
    .panel-body {padding:15px}
    .panel-title {margin-top:0;margin-bottom:0;font-size:14px;color:inherit}
    .label {display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em;margin-top: .3em;}
    .layui-red {color:red}
    .main_btn > p {height:40px;}
</style>
<body>
<div class="layuimini-container">
    <div class="layuimini-main layui-top-box">
        <div class="layui-row layui-col-space10">

            <div class="layui-col-md3">
                <div class="col-xs-6 col-md-3">
                    <div class="panel layui-bg-cyan">
                        <div class="panel-body">
                            <div class="panel-title">
                                <span class="label pull-right layui-bg-blue">实时</span>
                                <h5>用户统计</h5>
                            </div>
                            <div class="panel-content">
                                <h1 class="adminNum"><span th:text="${session.userTime.all}"></span></h1>
                                <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i><span th:text="${session.userTime.all}"></span></div>
                                <small>已注册用户</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-col-md3">
                <div class="col-xs-6 col-md-3">
                    <div class="panel layui-bg-blue">
                        <div class="panel-body">
                            <div class="panel-title">
                                <span class="label pull-right layui-bg-cyan">实时</span>
                                <h5>菜品统计</h5>
                            </div>
                            <div class="panel-content">
                                <h1 class="dishNum"><span th:text="${session.dishTime.all}"></span></h1>
                                <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i><span th:text="${session.dishTime.all}"></span></div>
                                <small>菜品数量</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md3">
                <div class="col-xs-6 col-md-3">
                    <div class="panel layui-bg-green">
                        <div class="panel-body">
                            <div class="panel-title">
                                <span class="label pull-right layui-bg-orange">实时</span>
                                <h5>座位统计</h5>
                            </div>
                            <div class="panel-content">
                                <h1 class="no-margins"><span th:text="${session.seatTime.all}"></span></h1>
                                <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i> <span th:text="${session.seatTime.all}"></span></div>
                                <small>可选座位数</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md3">
                <div class="col-xs-6 col-md-3">
                    <div class="panel layui-bg-orange">
                        <div class="panel-body">
                            <div class="panel-title">
                                <span class="label pull-right layui-bg-green">实时</span>
                                <h5>订单统计</h5>
                            </div>
                            <div class="panel-content">
                                <h1 class="no-margins"><span th:text="${session.orderTime.all}"></span></h1>
                                <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i> <span th:text="${session.orderTime.all}"></span></div>
                                <small>订单数量</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div style="margin-left: 40px" class="layui-box">
        <div class="layui-row layui-col-space10">
            <div class="layui-col-md6">
                <table class="layui-table">
                    <colgroup>
                        <col width="150">
                        <col width="200">
                        <col>
                    </colgroup>
                    <thead>
                    <tr>
                        <th>用户名</th>
                        <th>姓名</th>
                        <th>加入时间</th>
                    </tr>
                    </thead>
                    <tbody id="table">
                    </tbody>
                </table>
            </div>
            <div class="layui-col-md6">
                <ul class="layui-timeline" id="li">

                </ul>
            </div>
            <div class="layui-field-box">
                <table class="layui-table" lay-even>
                    <thead>
                    <tr>
                        <th>统计</th>
                        <th>进货次数</th>
                        <th>退货次数</th>
                        <th>收入</th>
                        <th>注册用户</th>
                        <th>管理员</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>总数</td>
                        <td th:text="${session.getgoodsTime.all}"></td>
                        <td th:text="${session.backgoodsTime.all}"></td>
                        <td th:text="${session.priceTime.all}"></td>
                        <td th:text="${session.userTime.all}"></td>
                        <td th:text="${session.adminTime.all}"></td>
                    </tr>
                    <tr>
                        <td>今日</td>
                        <td th:text="${session.getgoodsTime.now}"></td>
                        <td th:text="${session.backgoodsTime.now}"></td>
                        <td th:text="${session.priceTime.now}"></td>
                        <td th:text="${session.userTime.now}"></td>
                        <td th:text="${session.adminTime.now}"></td>
                    </tr>
                    <tr>
                        <td>昨日</td>
                        <td th:text="${session.getgoodsTime.pre}"></td>
                        <td th:text="${session.backgoodsTime.pre}"></td>
                        <td th:text="${session.priceTime.pre}"></td>
                        <td th:text="${session.userTime.pre}"></td>
                        <td th:text="${session.adminTime.pre}"></td>
                    </tr>
                    <tr>
                        <td>本周</td>
                        <td th:text="${session.getgoodsTime.week}"></td>
                        <td th:text="${session.getgoodsTime.week}"></td>
                        <td th:text="${session.priceTime.week}"></td>
                        <td th:text="${session.userTime.week}"></td>
                        <td th:text="${session.adminTime.week}"></td>
                    </tr>
                    <tr>
                        <td>本月</td>
                        <td th:text="${session.getgoodsTime.mouth}"></td>
                        <td th:text="${session.backgoodsTime.mouth}"></td>
                        <td th:text="${session.priceTime.mouth}"></td>
                        <td th:text="${session.userTime.mouth}"></td>
                        <td th:text="${session.adminTime.mouth}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script src="../lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
<script>
    $(function(){
        //执行查询时间函数
        loadTable()
        loadli()
    })
    function loadTable() {
        $.ajax({
            url:"/table",
            type:"get",
            dataType:"json",
            success:function(data){
                var html="";
                for(var i=0;i<data.length;i++){
                    html+="<tr>" +
                        "<td >"+data[i].userName+"</span></td>"+
                        "<td >"+data[i].name+"</td>" +
                        "<td >"+data[i].time+"</td>" +
                        "</tr>"
                }
                $("#table").html(html);
            }
        })
    }

    function loadli(){
        $.ajax({
            url:"/dish/li",
            type:"get",
            dataType:"json",
            success:function(data){
                console.log(data)
                var html="";
                for(var i=0;i<data.length;i++){
                    html+="<li class=\"layui-timeline-item\">" +
                        "<i class=\"layui-icon layui-timeline-axis\">&#xe63f;</i>" +
                        "<div class=\"layui-timeline-content layui-text\">" +
                        "<h3 class=\"layui-timeline-title\">"+data[i].time+"</h3>" +
                        "<p>" +
                        data[i].dishName+
                        "<br> 单价："+data[i].dishPrice +
                        "<br> 种类："+data[i].type +
                        "</p>" +
                        "</div>" +
                        "</li>"
                }
                html+="<li class=\"layui-timeline-item\">\n" +
                    "<i class=\"layui-icon layui-timeline-axis\">&#xe63f;</i>" +
                    "<div class=\"layui-timeline-content layui-text\">" +
                    "<div class=\"layui-timeline-title\">过去</div>" +
                    "</div>" +
                    "</li>"
                $("#li").html(html);
            }
        })
    }
</script>
</body>
</html>